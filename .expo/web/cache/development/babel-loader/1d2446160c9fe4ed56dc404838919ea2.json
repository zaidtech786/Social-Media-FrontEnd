{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport Conversation from \"./Conversation\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { AuthContext } from \"./Context/useContext\";\nimport axios from \"axios\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Chats() {\n  var _useContext = useContext(AuthContext),\n      userId = _useContext.userId;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      conversations = _useState2[0],\n      setConversations = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentChat = _useState4[0],\n      setCurrentChat = _useState4[1];\n\n  useEffect(function () {\n    var getConversations = function _callee() {\n      var res;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(axios.get(\"http://192.168.0.106:5000/chat/getconversation/\" + userId));\n\n            case 3:\n              res = _context.sent;\n              console.log(res.data);\n              setConversations(res.data);\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 8]], Promise);\n    };\n\n    getConversations();\n  }, [userId]);\n  var navigation = useNavigation();\n  return _jsx(View, {\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(Text, {\n        style: {\n          fontSize: 20,\n          fontWeight: \"600\"\n        },\n        children: \"Messages\"\n      }), _jsxs(View, {\n        style: styles.container,\n        children: [_jsxs(View, {\n          style: styles.inputGrp,\n          children: [search == \"\" ? _jsx(SearchIcon, {\n            name: \"search\",\n            size: 20,\n            style: {\n              marginLeft: 10,\n              textAlign: \"center\",\n              marginTop: 3\n            }\n          }) : _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return ClearData();\n            },\n            children: _jsx(Times, {\n              name: \"times\",\n              size: 20,\n              style: {\n                marginLeft: 10,\n                textAlign: \"center\",\n                marginTop: 3\n              }\n            })\n          }), _jsx(TextInput, {\n            placeholder: \"search\",\n            style: styles.search,\n            value: search,\n            onChangeText: function onChangeText(val) {\n              setSearch(val);\n              console.log(val);\n              getSearchData();\n            }\n          })]\n        }), search ? _jsx(FlatList, {\n          data: filterData,\n          keyExtractor: function keyExtractor(item) {\n            return item._id;\n          },\n          renderItem: function renderItem(_ref) {\n            var item = _ref.item;\n            console.log(item);\n            return _jsxs(View, {\n              style: styles.userProfile,\n              children: [_jsx(Image, {\n                source: {\n                  uri: item.profile == \"\" ? \"http://www.gravatar.com/avatar/?d=mp\" : item.profile\n                },\n                style: styles.profile\n              }), _jsx(TouchableOpacity, {\n                onPress: function onPress() {\n                  return navigation.navigate(\"userprofile\", {\n                    Id: item._id\n                  });\n                },\n                children: _jsxs(View, {\n                  style: styles.nameUser,\n                  children: [_jsx(Text, {\n                    style: {\n                      fontWeight: \"500\"\n                    },\n                    children: item.userName\n                  }), _jsxs(Text, {\n                    style: {\n                      fontWeight: \"400\"\n                    },\n                    children: [\" \", item.name]\n                  })]\n                })\n              })]\n            });\n          }\n        }) : _jsx(Text, {\n          children: \"No Friends\"\n        })]\n      }), conversations.map(function (c) {\n        return _jsx(View, {\n          children: _jsx(Conversation, {\n            conversation: c,\n            currentUser: userId\n          })\n        }, c._id);\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    marginTop: 40,\n    marginLeft: 20\n  }\n});","map":{"version":3,"names":["React","useContext","useEffect","useState","Conversation","useNavigation","AuthContext","axios","Chats","userId","conversations","setConversations","currentChat","setCurrentChat","getConversations","get","res","console","log","data","navigation","styles","container","fontSize","fontWeight","inputGrp","search","marginLeft","textAlign","marginTop","ClearData","val","setSearch","getSearchData","filterData","item","_id","userProfile","uri","profile","navigate","Id","nameUser","userName","name","map","c","StyleSheet","create"],"sources":["I:/ReactNative/social_media-app/screens/Chats.js"],"sourcesContent":["import { StyleSheet, Text, TouchableOpacity, View, Image } from \"react-native\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport Conversation from \"./Conversation\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { AuthContext } from \"./Context/useContext\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Chats() {\r\n  const { userId } = useContext(AuthContext);\r\n  const [conversations, setConversations] = useState([]);\r\n\r\n  const [currentChat, setCurrentChat] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const getConversations = async () => {\r\n      try {\r\n        const res = await axios.get(\r\n          \"http://192.168.0.106:5000/chat/getconversation/\" + userId\r\n        );\r\n        console.log(res.data);\r\n        setConversations(res.data);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    getConversations();\r\n  }, [userId]);\r\n\r\n  const navigation = useNavigation();\r\n  return (\r\n    <View>\r\n      <View style={styles.container}>\r\n        <Text style={{ fontSize: 20, fontWeight: \"600\" }}>Messages</Text>\r\n\r\n        <View style={styles.container}>\r\n          <View style={styles.inputGrp}>\r\n            {search == \"\" ? (\r\n              <SearchIcon\r\n                name=\"search\"\r\n                size={20}\r\n                style={{ marginLeft: 10, textAlign: \"center\", marginTop: 3 }}\r\n              />\r\n            ) : (\r\n              <TouchableOpacity onPress={() => ClearData()}>\r\n                <Times\r\n                  name=\"times\"\r\n                  size={20}\r\n                  style={{ marginLeft: 10, textAlign: \"center\", marginTop: 3 }}\r\n                />\r\n              </TouchableOpacity>\r\n            )}\r\n\r\n            <TextInput\r\n              placeholder=\"search\"\r\n              style={styles.search}\r\n              value={search}\r\n              onChangeText={(val) => {\r\n                setSearch(val);\r\n                console.log(val);\r\n                getSearchData();\r\n              }}\r\n            />\r\n          </View>\r\n\r\n          {search ? (\r\n            <FlatList\r\n              data={filterData}\r\n              keyExtractor={(item) => item._id}\r\n              renderItem={({ item }) => {\r\n                console.log(item);\r\n                return (\r\n                  <View style={styles.userProfile}>\r\n                    <Image\r\n                      source={{\r\n                        uri:\r\n                          item.profile == \"\"\r\n                            ? \"http://www.gravatar.com/avatar/?d=mp\"\r\n                            : item.profile,\r\n                      }}\r\n                      style={styles.profile}\r\n                    />\r\n                    <TouchableOpacity\r\n                      onPress={() =>\r\n                        navigation.navigate(\"userprofile\", {\r\n                          Id: item._id,\r\n                        })\r\n                      }\r\n                    >\r\n                      <View style={styles.nameUser}>\r\n                        <Text style={{ fontWeight: \"500\" }}>\r\n                          {item.userName}\r\n                        </Text>\r\n                        <Text style={{ fontWeight: \"400\" }}> {item.name}</Text>\r\n                      </View>\r\n                    </TouchableOpacity>\r\n                  </View>\r\n                );\r\n              }}\r\n            />\r\n          ) : (\r\n            <Text>No Friends</Text>\r\n          )}\r\n        </View>\r\n\r\n        {conversations.map((c) => (\r\n          <View key={c._id}>\r\n            <Conversation conversation={c} currentUser={userId} />\r\n          </View>\r\n        ))}\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    marginTop: 40,\r\n    marginLeft: 20,\r\n  },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}