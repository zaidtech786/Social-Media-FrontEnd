{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Send from \"@expo/vector-icons/FontAwesome\";\nimport React, { useState, useContext } from \"react\";\nimport { AuthContext } from \"./Context/useContext\";\nimport { getMessages } from \"./Conversation\";\nimport { Route } from \"@react-navigation/native\";\nimport axios from \"axios\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar Message = function Message(_ref) {\n  var route = _ref.route;\n\n  var _useContext = useContext(AuthContext),\n      userId = _useContext.userId;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      messages = _useState4[0],\n      setMessages = _useState4[1];\n\n  var _route$params = route.params,\n      conversationId = _route$params.conversationId,\n      friendId = _route$params.friendId;\n  console.log(conversationId, \" +  \" + friendId);\n\n  var getUser = function _callee() {\n    var res;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(axios(\"http://192.168.0.106:5000/api/profile/\" + friendId));\n\n          case 3:\n            res = _context.sent;\n            setUser(res.data.user);\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  useEffect(function () {\n    getUser();\n  }, []);\n\n  var getMessages = function _callee2(conversationId) {\n    var res;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log(\"conversationId\", conversationId);\n            _context2.prev = 1;\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(axios.get(\"http://192.168.0.106:5000/chat/getmessage/\" + conversationId));\n\n          case 4:\n            res = _context2.sent;\n            console.log(res);\n            setMessages(res.data);\n            _context2.next = 12;\n            break;\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](1);\n            console.log(_context2.t0);\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[1, 9]], Promise);\n  };\n\n  return _jsxs(_Fragment, {\n    children: [_jsx(View, {\n      style: {\n        backgroundColor: \"#f1c40f\",\n        paddingVertical: 20\n      },\n      children: _jsx(Text, {\n        style: {\n          alignSelf: \"center\",\n          marginTop: 30,\n          fontSize: 20,\n          backgroundColor: \"#f1c40f\"\n        },\n        children: \"Zaid Siddiqi\"\n      })\n    }), _jsx(FlatList, {\n      data: data,\n      keyExtractor: function keyExtractor(key) {\n        return key.id;\n      },\n      renderItem: function renderItem(_ref2) {\n        var item = _ref2.item;\n        return _jsx(SafeAreaView, {\n          children: _jsxs(View, {\n            style: userId ? styles.CurrentUser : styles.User,\n            children: [_jsx(View, {\n              style: styles.message,\n              children: _jsx(Text, {\n                children: item.text\n              })\n            }), _jsx(Text, {\n              style: {\n                marginRight: 20\n              },\n              children: \" 8:30 Am\"\n            })]\n          })\n        });\n      }\n    }), _jsx(Textinput, {})]\n  });\n};\n\nexport var Textinput = function Textinput() {\n  return _jsxs(View, {\n    style: {\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      marginVertical: 20,\n      position: \"relative\"\n    },\n    children: [_jsx(TextInput, {\n      placeholder: \"Enter a Mesage\",\n      style: {\n        borderWidth: 1,\n        borderColor: \"#000\",\n        padding: 7,\n        width: 350,\n        borderRadius: 15\n      }\n    }), _jsx(View, {\n      style: {\n        position: \"absolute\",\n        marginLeft: 50\n      },\n      children: _jsx(TouchableOpacity, {\n        children: _jsx(Text, {\n          children: _jsx(Send, {\n            name: \"send\",\n            size: 25\n          })\n        })\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  message: {\n    borderRadius: 20,\n    padding: 10,\n    borderWidth: 1,\n    borderColor: \"#000\",\n    width: 200\n  },\n  CurrentUser: {\n    justifyContent: \"flex-end\",\n    alignItems: \"flex-end\",\n    margin: 10\n  },\n  User: {\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n    margin: 10\n  }\n});\nexport default Message;","map":{"version":3,"names":["Send","React","useState","useContext","AuthContext","getMessages","Route","axios","Message","route","userId","user","setUser","messages","setMessages","params","conversationId","friendId","console","log","getUser","res","data","useEffect","get","backgroundColor","paddingVertical","alignSelf","marginTop","fontSize","key","id","item","styles","CurrentUser","User","message","text","marginRight","Textinput","justifyContent","alignItems","marginVertical","position","borderWidth","borderColor","padding","width","borderRadius","marginLeft","StyleSheet","create","margin"],"sources":["I:/ReactNative/social_media-app/screens/Message.js"],"sourcesContent":["import {\r\n  FlatList,\r\n  SafeAreaView,\r\n  ScrollView,\r\n  StyleSheet,\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  View,\r\n} from \"react-native\";\r\nimport Send from \"react-native-vector-icons/FontAwesome\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport { AuthContext } from \"./Context/useContext\";\r\nimport { getMessages } from \"./Conversation\";\r\nimport { Route } from \"@react-navigation/native\";\r\nimport axios from \"axios\";\r\n\r\nconst Message = ({ route }) => {\r\n  const { userId } = useContext(AuthContext);\r\n  const [user, setUser] = useState([]);\r\n  const [messages, setMessages] = useState([]);\r\n  const { conversationId, friendId } = route.params;\r\n  console.log(conversationId, \" +  \" + friendId);\r\n\r\n  const getUser = async () => {\r\n    try {\r\n      const res = await axios(\r\n        `http://192.168.0.106:5000/api/profile/${friendId}`\r\n      );\r\n      setUser(res.data.user);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    getUser();\r\n  }, []);\r\n\r\n  const getMessages = async (conversationId) => {\r\n    console.log(\"conversationId\", conversationId);\r\n    try {\r\n      const res = await axios.get(\r\n        `http://192.168.0.106:5000/chat/getmessage/${conversationId}`\r\n      );\r\n      console.log(res);\r\n      setMessages(res.data);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <View style={{ backgroundColor: \"#f1c40f\", paddingVertical: 20 }}>\r\n        <Text\r\n          style={{\r\n            alignSelf: \"center\",\r\n            marginTop: 30,\r\n            fontSize: 20,\r\n            backgroundColor: \"#f1c40f\",\r\n          }}\r\n        >\r\n          Zaid Siddiqi\r\n        </Text>\r\n      </View>\r\n\r\n      <FlatList\r\n        data={data}\r\n        keyExtractor={(key) => key.id}\r\n        renderItem={({ item }) => {\r\n          return (\r\n            <SafeAreaView>\r\n              <View style={userId ? styles.CurrentUser : styles.User}>\r\n                <View style={styles.message}>\r\n                  <Text>{item.text}</Text>\r\n                </View>\r\n                <Text style={{ marginRight: 20 }}> 8:30 Am</Text>\r\n              </View>\r\n            </SafeAreaView>\r\n          );\r\n        }}\r\n      />\r\n\r\n      <Textinput />\r\n    </>\r\n  );\r\n};\r\n\r\nexport const Textinput = () => {\r\n  return (\r\n    <View\r\n      style={{\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        marginVertical: 20,\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <TextInput\r\n        placeholder=\"Enter a Mesage\"\r\n        style={{\r\n          borderWidth: 1,\r\n          borderColor: \"#000\",\r\n          padding: 7,\r\n          width: 350,\r\n          borderRadius: 15,\r\n        }}\r\n      />\r\n      <View style={{ position: \"absolute\", marginLeft: 50 }}>\r\n        <TouchableOpacity>\r\n          <Text>\r\n            <Send name=\"send\" size={25} />\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  message: {\r\n    borderRadius: 20,\r\n    padding: 10,\r\n    borderWidth: 1,\r\n    borderColor: \"#000\",\r\n    // margin: 10,\r\n    width: 200,\r\n  },\r\n  CurrentUser: {\r\n    justifyContent: \"flex-end\",\r\n    alignItems: \"flex-end\",\r\n    margin: 10,\r\n  },\r\n  User: {\r\n    justifyContent: \"flex-start\",\r\n    alignItems: \"flex-start\",\r\n    margin: 10,\r\n  },\r\n});\r\nexport default Message;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}